<?php


namespace OTP\Helper\Gateway;

use Twilio\Exceptions\TwilioException;
if (defined("\x41\102\123\120\101\x54\110")) {
    goto EF;
}
die;
EF:
use OTP\Objects\IGatewayType;
use OTP\Traits\Instance;
use OTP\Helper\GatewayType;
use OTP\Helper\MocURLOTP;
class MoTwilio implements IGatewayType
{
    use Instance;
    public $_gatewayName;
    private $_SDKPath;
    public function __construct()
    {
        $this->_gatewayName = "\x54\167\x69\154\x69\157";
        $this->SDKPath = MOV_DIR . "\163\155\x73\x2d\x67\141\164\145\x77\141\x79\x73\x2f\x74\167\151\x6c\x69\x6f\x2d\x70\150\160\55\155\x61\163\x74\145\162\57\x73\162\x63";
        if (!is_dir($this->SDKPath)) {
            goto uO;
        }
        require_once $this->SDKPath . "\x2f\x54\x77\x69\154\151\x6f\x2f\141\165\164\x6f\154\157\141\144\x2e\x70\150\160";
        uO:
    }
    public function sendOTPRequest($SF, $fk)
    {
        try {
            $N1 = get_mo_option("\164\167\151\154\151\157\137\x73\151\144");
            $w0 = get_mo_option("\164\167\x69\x6c\151\157\x5f\x74\157\153\145\156");
            $JG = new \Twilio\Rest\Client($N1, $w0);
            $kX = $JG->messages->create("\53" . apply_filters("\155\157\137\146\151\x6c\164\x65\x72\137\x70\x68\x6f\156\145\137\x62\x65\146\x6f\x72\145\x5f\141\160\x69\x5f\143\x61\x6c\x6c", $fk), array("\x66\162\x6f\x6d" => "\x2b" . get_mo_option("\x74\x77\x69\x6c\x69\157\137\x66\162\x6f\x6d\137\160\150\157\x6e\145"), "\142\157\144\x79" => $SF));
            $Re = $kX->sid ? true : false;
        } catch (TwilioException $S9) {
            if (!(isset($_POST["\141\x63\164\x69\x6f\x6e"]) && $_POST["\x61\143\x74\151\157\156"] == "\x6d\151\x6e\x69\x6f\162\x61\156\x67\x65\137\147\x65\164\137\164\x65\x73\x74\x5f\162\145\x73\160\157\x6e\163\145")) {
                goto BO;
            }
            $Re = array("\x65\162\162\x6f\x72\x43\x6f\144\145" => $S9->getCode(), "\145\162\162\157\162\x4d\145\163\x73\141\147\145" => $S9->getMessage());
            BO:
            $Re = is_array($Re) ? json_encode($Re) : false;
        }
        return $Re;
    }
    public function handleGatewayResponse($Re, $SF, $fk)
    {
        $Re = apply_filters("\x6d\x6f\x5f\x63\165\x73\x74\x6f\x6d\137\147\x61\x74\145\x77\141\x79\x5f\162\x65\163\160\157\x6e\x73\145", $Re, $SF, $fk);
        return $Re;
    }
    public function getGatewayConfigView($GZ, $RR)
    {
        $Dl = get_mo_option("\x74\167\151\154\151\157\137\163\x69\x64");
        $qe = get_mo_option("\164\167\x69\154\151\x6f\x5f\164\x6f\153\x65\x6e");
        $ss = get_mo_option("\x74\x77\151\154\x69\x6f\137\x66\x72\157\155\x5f\160\x68\157\x6e\145");
        if (!is_dir($this->SDKPath)) {
            goto P_;
        }
        return "\x3c\x64\151\x76\x20\x63\154\141\163\163\75\42\155\157\55\x67\x61\x74\x65\x77\x61\171\55\164\145\x78\x74\55\160\x61\151\162\40\155\157\x2d\x66\x6c\x65\170\x2d\x70\x61\x69\x72\x22\x3e\xd\xa\40\x20\40\40\x20\x20\x20\x20\40\40\40\x20\40\x20\40\x20\40\40\x20\40\74\x6c\x61\x62\145\154\x20\x66\157\162\75\42\143\x75\x73\x74\x6f\155\137\163\155\x73\x5f\147\141\x74\145\167\141\x79\x5f\163\x65\x63\162\x65\164\x22\x3e" . mo_("\124\x77\151\154\151\x6f\40\x41\x43\103\x4f\x55\116\124\x20\x53\x49\x44\40\72\x20") . "\x3c\x2f\154\x61\142\x65\x6c\76\xd\12\40\x20\x20\40\x20\40\x20\40\x20\x20\x20\40\40\x20\40\40\40\40\40\40\x3c\x69\156\160\x75\x74\x20\164\x79\160\145\75\42\x74\145\x78\x74\42\x20" . $GZ . "\x20\15\xa\x20\x20\x20\40\40\x20\40\40\x20\x20\x20\x20\40\40\40\40\40\40\40\40\40\x20\40\40\x69\144\x3d\x22\x63\x75\x73\x74\x6f\x6d\137\163\x6d\163\137\x67\x61\x74\x65\167\141\x79\137\163\145\143\x72\x65\164\42\40\15\xa\40\40\40\40\x20\x20\x20\40\x20\40\40\x20\x20\40\40\40\x20\40\40\x20\40\40\x20\x20\143\154\x61\x73\163\x3d\42\155\157\x5f\x72\145\147\151\x73\x74\x72\x61\x74\151\157\x6e\x5f\x74\x61\x62\x6c\145\x5f\164\145\170\164\x62\157\170\x22\x20\15\12\x20\x20\x20\40\x20\x20\40\x20\x20\x20\x20\40\40\x20\x20\x20\40\40\40\x20\x20\40\x20\40\156\x61\x6d\x65\75\x22\143\165\163\x74\157\155\x5f\163\x6d\x73\x5f\147\141\164\x65\x77\141\171\137\x73\145\x63\x72\x65\x74\42\x20\15\xa\40\x20\40\x20\40\40\40\x20\x20\40\x20\40\40\x20\x20\40\x20\40\x20\x20\x20\40\40\40\160\x6c\141\x63\x65\150\x6f\x6c\x64\x65\x72\x3d\x22\105\x6e\x74\x65\162\x20\171\157\165\162\x20\x54\x77\151\x6c\x69\x6f\x20\x41\x43\x43\117\125\x4e\124\x20\x53\111\104\x22\40\xd\xa\x20\x20\x20\40\x20\40\x20\x20\x20\x20\40\40\40\40\40\x20\40\x20\40\x20\40\x20\x20\x20\166\141\154\x75\x65\40\75\x20\42" . $Dl . "\x22\x20\162\x65\x71\165\151\x72\145\x64\x2f\x3e\xd\xa\40\40\40\40\40\40\40\40\40\x20\40\40\x20\40\x20\40\74\x2f\x64\x69\x76\76\15\xa\x20\40\40\x20\x20\x20\40\40\x20\40\x20\40\x20\x20\40\x20\74\x64\x69\x76\x20\143\154\141\163\163\x3d\42\x6d\157\55\x67\x61\164\x65\x77\141\171\x2d\x74\x65\x78\164\x2d\x70\x61\x69\x72\x20\x6d\157\x2d\x66\x6c\x65\x78\55\x70\x61\151\162\42\76\15\12\x20\x20\x20\40\x20\40\40\40\40\x20\40\x20\x20\40\x20\x20\x20\x20\40\40\x3c\x6c\x61\142\145\154\40\x66\x6f\162\x3d\x22\143\165\x73\164\157\x6d\x5f\163\x6d\x73\137\x67\141\164\145\x77\141\171\x5f\153\x65\x79\x22\76" . mo_("\124\167\x69\154\151\157\x20\101\125\124\110\x20\124\x4f\x4b\105\x4e\40\x3a\40") . "\74\57\154\141\x62\x65\154\x3e\xd\12\x20\40\x20\x20\x20\40\x20\x20\40\40\40\40\40\x20\x20\x20\x20\x20\x20\x20\74\151\156\160\x75\164\40\164\171\x70\x65\x3d\42\164\x65\x78\164\42\40" . $GZ . "\x20\xd\xa\40\x20\x20\x20\x20\x20\40\40\x20\x20\x20\x20\x20\40\x20\x20\40\40\40\x20\40\40\40\x20\151\x64\x3d\42\x63\165\x73\164\x6f\x6d\x5f\163\x6d\163\x5f\147\x61\x74\x65\167\x61\x79\137\x6b\x65\x79\42\x20\15\12\x20\x20\40\40\40\x20\x20\x20\x20\x20\40\x20\x20\40\40\40\x20\x20\40\40\x20\40\40\x20\143\x6c\x61\163\163\x3d\x22\155\x6f\137\x72\x65\147\151\x73\164\162\141\x74\x69\157\x6e\137\x74\x61\142\154\x65\137\x74\x65\170\x74\142\157\x78\x22\40\15\12\x20\40\40\40\40\40\40\40\40\40\40\40\x20\x20\x20\x20\x20\40\40\40\x20\40\40\40\156\x61\155\145\x3d\x22\x63\165\x73\x74\157\155\x5f\x73\x6d\163\x5f\147\x61\x74\x65\167\x61\171\x5f\x6b\145\x79\x22\x20\xd\12\40\40\x20\40\x20\x20\40\40\x20\x20\x20\x20\40\40\x20\40\x20\x20\40\40\x20\x20\x20\x20\160\x6c\141\143\145\x68\157\x6c\x64\x65\x72\x3d\x22\105\x6e\x74\145\x72\x20\x79\x6f\x75\x72\40\124\167\x69\x6c\x69\x6f\40\101\165\x74\x68\40\x54\157\153\145\x6e\x22\40\xd\12\40\40\40\x20\40\40\40\40\x20\40\x20\x20\x20\40\40\x20\40\x20\40\40\x20\x20\x20\x20\166\141\x6c\165\145\x20\x3d\40\x22" . $qe . "\x22\x20\x72\145\161\x75\x69\162\x65\x64\57\x3e\15\xa\x20\x20\40\40\40\x20\40\40\40\x20\40\40\x20\40\40\40\x3c\x2f\144\151\166\x3e\xd\xa\x20\40\x20\40\x20\x20\40\40\40\x20\x20\x20\x20\40\x20\x20\x3c\144\x69\x76\x20\x63\x6c\x61\163\x73\75\x22\x6d\x6f\x2d\x67\x61\x74\x65\x77\x61\171\55\164\145\170\164\55\x70\x61\151\162\x20\x6d\x6f\x2d\146\154\145\x78\x2d\160\x61\x69\x72\x22\x3e\xd\xa\40\x20\40\x20\x20\x20\x20\40\x20\40\40\40\x20\x20\x20\x20\40\x20\x20\40\x3c\x6c\141\142\145\154\x20\146\157\x72\75\42\143\165\x73\164\x6f\155\137\x73\155\163\137\147\141\164\x65\x77\141\x79\x5f\x63\x61\x6c\154\x65\162\111\x44\42\76" . mo_("\124\167\151\154\x69\157\x20\120\x48\117\116\x45\x20\116\x55\115\102\x45\x52\40\x3a\x20") . "\74\x2f\x6c\141\x62\145\x6c\x3e\15\12\x20\40\40\40\40\x20\40\40\40\x20\x20\40\40\40\x20\x20\x20\x20\x20\40\x3c\151\156\x70\165\164\x20\164\x79\x70\x65\x3d\42\x74\x65\170\x74\x22\40" . $GZ . "\x20\xd\12\40\x20\x20\x20\40\x20\x20\40\x20\x20\x20\x20\x20\x20\x20\x20\x20\40\x20\40\40\40\40\x20\151\x64\x3d\x22\143\165\163\x74\x6f\155\137\163\155\x73\x5f\x67\x61\x74\x65\167\141\171\x5f\143\x61\154\x6c\145\162\x49\104\x22\x20\15\xa\40\x20\40\x20\x20\40\40\x20\40\40\x20\40\40\x20\40\x20\x20\40\x20\40\x20\40\x20\x20\143\154\141\163\x73\x3d\x22\x6d\157\137\x72\145\147\151\x73\x74\x72\141\x74\x69\x6f\156\137\164\x61\142\x6c\x65\x5f\x74\145\170\x74\x62\x6f\x78\x22\x20\xd\xa\40\40\40\40\40\x20\40\x20\x20\x20\40\40\40\40\40\x20\40\40\40\x20\x20\x20\x20\40\156\141\x6d\145\x3d\x22\143\165\x73\164\x6f\x6d\x5f\163\155\163\x5f\x67\141\164\x65\167\x61\171\137\x63\x61\154\154\145\x72\x49\x44\x22\40\15\xa\x20\x20\x20\40\x20\x20\x20\40\40\x20\x20\x20\x20\x20\x20\40\x20\40\40\x20\x20\x20\x20\40\160\x6c\141\143\145\150\157\x6c\144\145\x72\75\42\x45\156\164\145\x72\40\171\157\165\x72\x20\x54\x77\x69\x6c\151\157\40\x50\150\x6f\156\x65\x20\116\x75\155\x62\145\x72\42\40\xd\xa\x20\40\40\x20\40\x20\40\40\x20\40\40\40\x20\40\x20\x20\x20\x20\x20\x20\x20\40\x20\40\x76\x61\x6c\165\145\40\x3d\40\x22" . $ss . "\x22\x20\x72\x65\x71\x75\x69\162\145\144\x2f\76\xd\12\x20\40\40\x20\40\x20\x20\40\x20\x20\40\40\x20\40\40\40\x3c\x2f\144\x69\166\76";
        goto hK;
        P_:
        return "\x3c\144\x69\166\40\x63\154\141\x73\x73\75\42\155\157\137\x6f\x74\x70\137\x6e\x6f\x74\x65\42\x20\163\164\x79\154\145\x3d\42\155\x61\x72\147\x69\156\55\x62\157\164\x74\x6f\155\72\61\60\160\x78\x3b\x22\x3e\xd\xa\x20\40\x20\x20\40\x20\40\x20\x20\x20\40\x20\x20\40\40\x20\40\x20\x20\40\x20\40\40\x20\74\x6f\x6c\76\xd\12\40\40\40\40\x20\40\40\x20\40\40\x20\40\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\x20\40\74\x6c\151\76\x44\157\x77\x6e\x6c\x6f\x61\x64\40\164\150\x65\x20\x53\104\x4b\x20\146\162\x6f\155\x20\x74\x68\145\x20\154\151\156\x6b\x20\x62\145\154\157\x77\56\x3c\57\154\151\x3e\15\12\40\40\x20\x20\40\x20\40\40\x20\x20\x20\x20\40\40\40\x20\40\x20\40\40\40\x20\40\40\40\x20\x20\x20\x3c\x6c\x69\76\105\170\x74\162\141\143\164\40\141\156\144\40\160\x75\164\40\164\x77\151\154\x69\x6f\x2d\155\141\163\x74\145\162\55\160\150\160\x20\x66\157\154\144\x65\x72\40\x69\156\x20\164\x68\x65\40\160\x61\x74\x68\x20\x3a\40\x3c\143\157\x64\145\x3e\50\157\x74\160\40\160\x6c\165\x67\151\x6e\x20\146\157\154\x64\x65\x72\x29\x2f\x73\155\x73\55\x67\141\164\x65\167\141\171\163\x3c\57\x63\x6f\x64\145\x3e\x3c\57\154\151\x3e\xd\xa\40\x20\40\40\x20\x20\40\40\40\40\x20\40\x20\x20\x20\x20\40\x20\40\40\x20\x20\x20\40\74\57\x6f\x6c\76\xd\xa\40\x20\40\40\x20\x20\40\x20\40\x20\x20\40\40\40\40\x20\x20\x20\40\x20\74\57\144\151\166\x3e\15\xa\40\40\x20\40\40\40\x20\x20\x20\x20\40\x20\x20\40\40\40\40\x20\x20\40\x3c\x61\40\150\x72\x65\x66\75\x22\x68\164\x74\x70\163\72\57\x2f\x67\x69\x74\x68\165\142\x2e\x63\157\155\57\x74\x77\151\154\x69\x6f\57\164\x77\151\154\x69\x6f\55\160\150\x70\57\x61\162\143\x68\x69\x76\x65\x2f\155\141\163\164\145\162\x2e\x7a\151\x70\x22\x20\164\x61\x72\147\x65\x74\75\x22\42\x3e\15\xa\40\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\40\40\x20\40\40\x20\x20\x20\40\40\x20\x20\x3c\x64\x69\x76\x20\x63\154\x61\x73\163\75\42\x6d\157\55\x67\x61\164\145\x77\141\171\55\x73\144\x6b\x2d\156\157\164\151\x63\145\x22\x3e\xd\12\40\40\40\40\x20\40\40\x20\40\x20\40\x20\40\40\x20\x20\40\40\40\40\x20\x20\x20\40\x20\x20\x20\x20\74\x64\x69\x76\x20\143\154\x61\x73\163\x3d\x22\155\157\x2d\x73\x64\153\55\144\157\x77\156\x6c\157\141\144\55\x6c\x69\x6e\x6b\42\x3e\xd\xa\x20\40\x20\x20\40\40\40\40\40\40\40\40\x20\40\x20\40\40\x20\40\x20\x20\40\x20\40\x20\40\40\x20\40\x20\40\x20\74\x73\x70\141\156\40\x63\x6c\141\x73\x73\x3d\x22\x64\141\163\x68\151\x63\157\x6e\163\40\144\x61\x73\150\151\143\157\156\x73\x2d\x64\157\x77\156\154\157\141\144\x20\x20\x20\42\76\x3c\x2f\x73\160\x61\x6e\76\xd\xa\40\40\40\x20\40\40\40\x20\x20\40\40\40\40\x20\40\x20\40\40\x20\x20\x20\x20\x20\40\40\x20\40\x20\x3c\x2f\x64\151\166\76\15\12\40\40\40\40\40\40\x20\x20\40\40\x20\x20\40\x20\x20\x20\x20\x20\40\40\x20\x20\40\40\x20\40\x20\40\103\154\x69\x63\x6b\40\x68\145\162\x65\x20\164\x6f\40\104\x6f\167\156\x6c\157\x61\x64\40\x54\150\x65\40\123\x44\113\15\xa\x20\x20\x20\40\x20\40\40\40\x20\x20\40\x20\40\40\x20\40\40\x20\x20\x20\40\x20\x20\x20\x3c\x2f\144\151\166\76\xd\12\x20\40\40\x20\x20\40\x20\40\x20\x20\40\40\40\x20\40\40\x20\40\x20\x20\74\x2f\141\76";
        hK:
    }
    public function saveGatewayDetails($zy)
    {
        update_mo_option("\x74\x77\x69\x6c\x69\x6f\137\163\x69\x64", $zy["\143\165\163\164\157\x6d\x5f\x73\x6d\163\x5f\147\x61\164\145\x77\141\x79\x5f\x73\x65\143\162\x65\164"]);
        update_mo_option("\x74\167\151\x6c\151\157\x5f\x74\x6f\x6b\145\x6e", $zy["\143\165\x73\x74\157\x6d\137\163\x6d\x73\137\147\x61\164\145\167\x61\x79\x5f\153\145\171"]);
        update_mo_option("\x74\167\x69\x6c\x69\x6f\x5f\146\162\157\x6d\137\160\150\x6f\156\145", $zy["\143\165\x73\164\x6f\x6d\137\163\155\163\x5f\x67\141\164\145\x77\x61\x79\137\x63\x61\154\154\145\162\111\104"]);
    }
}
