(function($){var prefix='learndash-group-leaderboard-';var _prefix='learndash_group_leaderboard_';$('.cmb2-id-'+prefix+'metrics input').on('change',function(){$('.cmb2-id-'+prefix+'columns .cmb2-list').sortable({handle:'label',placeholder:'ui-state-highlight',forcePlaceholderSize:!0,});var target=$('.cmb2-id-'+prefix+'columns input[value="'+$(this).val()+'"]');if(!target.length){return}
if($(this).prop('checked')){target.parent().show()}else{target.parent().hide()}});$('.cmb2-id-'+prefix+'metrics input').each(function(){$(this).trigger('change')});$('#'+_prefix+'period').on('change',function(){var target=$('.cmb2-id-'+prefix+'period-start-date, .cmb2-id-'+prefix+'period-end-date');if($(this).val()==='custom'){target.slideDown()}else{target.slideUp()}});if($('#'+_prefix+'period').val()!=='custom'){$('.cmb2-id-'+prefix+'period-start-date, .cmb2-id-'+prefix+'period-end-date').hide()}
$('.cmb2-id-'+prefix+'columns input[type="checkbox"][value="avatar"]').on('change',function(){var target=$('.cmb2-id-'+prefix+'avatar-size');if($(this).prop('checked')){target.slideDown()}else{target.slideUp()}});$('.cmb2-id-'+prefix+'columns input[type="checkbox"][value="avatar"]').trigger('change');$('#'+_prefix+'regenerate_leaderboards').on('click',function(e){e.preventDefault();if(!$('#'+prefix+'regenerate-response').length){$(this).parent().append('<span id="'+prefix+'regenerate-response" style="display: inline-block; padding: 5px 0 0 8px;"></span>')}
if(!$('#'+prefix+'regenerate-response').find('.spinner').length){$('#'+prefix+'regenerate-response').html('<span class="spinner is-active" style="float: none; margin: 0;"></span>')}
$.post(ajaxurl,{action:'gamipress_learndash_group_leaderboard_regenerate_leaderboards'},function(response){$(this).prop('disabled',!0);if(response.success===!1){$('#'+prefix+'regenerate-response').css({color:'#a00'})}
$('#'+prefix+'regenerate-response').html((response.data.message!==undefined?response.data.message:response.data));$(this).prop('disabled',!1)}).fail(function(){$('#'+prefix+'regenerate-response').html('The server has returned an internal error.');$(this).prop('disabled',!1)})})})(jQuery)